\قسمت{الگوهای طراحی}


در این قسمت به الگوهای طراحی \زیرنویس{\لر{Design Patterns}} استفاده شده در این پروژه می‌پردازیم.

\شروع{فقرات}

	\فقره \مهم{الگوی \لر{Iterator}}
	
	\شروع{شکل}[htbp!]
		\centerimg{./dp/iterator.png}{.8\linewidth}
		\شرح{الگوی \لر{Iterator}}
		\برچسب{شکل:الگوی \لر{Iterator}}
	\پایان{شکل}
	
	از این الگوی طراحی بسیار استفاده شده است. هر جا لیست داریم، یک  \لر{Iterator}ی \لر{built-in} که در زبان وجود دارد استفاده شده است. به صورت مثال در رابط کاربری در مواقعی که کوئری‌ را دریافت می‌کنیم، جوابش به صورت لیست است، کتاب‌خانه \لر{Apollo} یک \لر{iterator} دارد که از یک عضو لیست شروع می‌کند و به بعدی می‌رود تا از تمام اعضای لیست یک به یک بگذرد. کد آن به صورت زیر است.
	
	
	\شروع{شکل}[htbp!]
	\centerimg{./dp/iterator-code.png}{.5\linewidth}
	\شرح{مثال الگوی \لر{Iterator}}
	\برچسب{شکل:مثال الگوی \لر{Iterator}}
	\پایان{شکل}
	
	\newpage
	
	\فقره \مهم{الگوی \لر{Singleton}}
	
کلاس \لر{VehicleCatalogue} به صورت \لر{Singleton} است. یعنی فقط یک نمونه از این کلاس موجود است. ساختار این نوع کلاس‌ها به شکل زیر است:


	\شروع{شکل}[htbp!]
	\centerimg{./dp/singleton.png}{.8\linewidth}
	\شرح{مثال الگوی \لر{Singleton}}
	\برچسب{شکل:مثال الگوی \لر{Singleton}}
	\پایان{شکل}
	
	\newpage
	\فقره \مهم{الگوی \لر{Adaptor}}
	
	ما با تکنولوژی \لر{graphql} برای ساختن \لر{API} کار می‌کنیم. به‌همین‌خاطر در رابط کاربری باید با استفاده از کتاب‌خانه \لر{Apollo} کوئری بزنیم. اما سمت \لر{back-end} همیشه در حال تغییر است، و با کمی تغییر کلا کوئری‌های ما به‌هم می‌خورد. راهکار موجود را شرح می دهیم.
	
		\شروع{شکل}[htbp!]
		\centerimg{./dp/adapter.png}{.8\linewidth}
		\شرح{مثال الگوی \لر{Adaptor}}
		\برچسب{شکل:مثال الگوی \لر{Adaptor}}
		\پایان{شکل}
		
		کافی است یک کلاس ابسترکت کوئری داشته باشیم، این کلاس یک تابع ابسترکت \لر{createQuery} داشته باشد. سپس برای تولید کوئری تابع \لر{createQuery} در \لر{instance} مورد نظر از کلاس را صدا کنیم. مثلا برای زدن کوئری \لر{login} کافی است، تابع \لر{createQuery} در \لر{LoginQuery} صدا شود. حال اگر تغییری در کد ایجاد شد کافی است \لر{createQuery} رو برابر با کوئری در کلاسی کنیم که سمت بک تعریف شده است.
\پایان{فقرات}
